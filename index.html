<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ENFOCADOS</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--Y:rgb(250,250,0);--Yd:rgb(215,215,0);--D:#2c3e50;--D2:#1a252f;--V:#10b981;--R:#ef4444;--G:#64748b;--B:#e2e8f0}
body{font-family:'Inter',sans-serif;background:linear-gradient(160deg,#fffef0 0%,#fff9c4 100%);min-height:100vh;color:#1e293b;line-height:1.6}
.wrap{max-width:860px;margin:0 auto;padding:1.8rem 1.2rem}
header{text-align:center;margin-bottom:1.6rem}
header svg{display:block;margin:0 auto .4rem}
h1{font-family:'Montserrat',sans-serif;font-size:3rem;font-weight:800;color:var(--D);letter-spacing:-1px}
.sub{color:var(--G);font-size:1.02rem;font-weight:500}
.card{background:#fff;border-radius:18px;padding:2rem;box-shadow:0 4px 24px rgba(0,0,0,.08);border:2px solid var(--Y);margin-bottom:1.4rem}
.ubar{background:linear-gradient(135deg,var(--Y),rgb(255,255,100));padding:.78rem 1.1rem;border-radius:10px;display:flex;justify-content:space-between;align-items:center;margin-bottom:1.4rem}
.ubar span{color:var(--D);font-weight:600}
.pbar-bg{background:var(--B);border-radius:4px;height:6px;margin-bottom:1.2rem;overflow:hidden}
.pbar{background:var(--Y);height:100%;transition:width .4s ease}
.qtxt{font-size:1.12rem;font-weight:500;margin-bottom:1.3rem}
.opts{display:flex;flex-direction:column;gap:.7rem}
.opt{display:flex;align-items:center;gap:.85rem;padding:1rem 1.1rem;border:2px solid var(--B);border-radius:11px;cursor:pointer;background:#fff;transition:all .2s}
.opt:hover:not(.dis){border-color:var(--Y);background:#fffef0}
.opt.dis{cursor:not-allowed;opacity:.85}
.opt.ok{border-color:var(--V);background:#f0fdf4}
.opt.ko{border-color:var(--R);background:#fef2f2}
.oltr{width:34px;height:34px;border-radius:50%;background:var(--B);display:flex;align-items:center;justify-content:center;font-weight:700;flex-shrink:0}
.opt.ok .oltr{background:var(--V);color:#fff}
.opt.ko .oltr{background:var(--R);color:#fff}
.fb{margin-top:1.3rem;padding:1.1rem 1.2rem;border-radius:10px}
.fb.ok{background:#f0fdf4;border-left:4px solid var(--V)}
.fb.ko{background:#fef2f2;border-left:4px solid var(--R)}
.fb-title{font-weight:700;margin-bottom:.4rem}
.nav{display:flex;gap:.7rem;margin-top:1.5rem}
.btn{width:100%;padding:.88rem;background:var(--Y);color:var(--D);border:none;border-radius:10px;font-weight:700;cursor:pointer;font-family:'Montserrat';display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .2s;font-size:.95rem}
.btn:hover{background:var(--Yd);transform:translateY(-1px)}
.res-wrap{text-align:center;padding:1rem 0}
.res-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1.5rem 0}
.res-item{padding:1.2rem;border-radius:12px;background:var(--B)}
.res-label{font-size:.85rem;color:var(--G);display:block;margin-bottom:.3rem}
.res-val{font-size:1.8rem;font-weight:800;color:var(--D)}
.emoji{font-size:3.5rem;margin-bottom:1rem;display:block}
</style>
</head>
<body>

<div class="wrap">
  <header>
    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="rgb(250,250,0)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
    <h1>ENFOCADOS</h1>
    <p class="sub">Plataforma de Entrenamiento de Alto Rendimiento</p>
  </header>

  <div id="game" style="display:block">
    <div class="ubar">
      <span>Pregunta <span id="qNum">1</span> de <span id="qTotal">-</span></span>
    </div>
    <div class="pbar-bg"><div id="pbar" class="pbar" style="width:0%"></div></div>
    
    <div class="card">
      <div id="qArea"></div>
      <div id="fbWrap"></div>
    </div>

    <div class="nav">
      <button class="btn" onclick="prevQ()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
        Anterior
      </button>
      <button class="btn" onclick="nextQ()">
        Siguiente
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
      </button>
    </div>
  </div>

  <div id="results" class="card" style="display:none">
    <div class="res-wrap">
      <span id="rEmoji" class="emoji"></span>
      <h2 style="font-family:'Montserrat';font-size:1.8rem;margin-bottom:.5rem">Â¡Entrenamiento Completado!</h2>
      <p style="color:var(--G);margin-bottom:1.5rem">AquÃ­ tienes el resumen de tu rendimiento profesional</p>
      
      <div class="res-grid">
        <div class="res-item" style="background:#f0fdf4"><span class="res-label">ACIERTOS</span><span id="rOk" class="res-val" style="color:var(--V)">-</span></div>
        <div class="res-item" style="background:#fef2f2"><span class="res-label">ERRORES</span><span id="rKo" class="res-val" style="color:var(--R)">-</span></div>
        <div class="res-item"><span class="res-label">TOTAL</span><span id="rTot" class="res-val">-</span></div>
        <div class="res-item" style="background:#fffef0;border:2px solid var(--Y)"><span class="res-label">PRECISIÃ“N</span><span id="rPct" class="res-val">-</span></div>
      </div>

      <button class="btn" onclick="location.reload()" style="max-width:280px;margin:0 auto">Reiniciar Entrenamiento</button>
    </div>
  </div>
</div>

<script>
var exam=[];
var idx=0;
var ans=[];
var correct=[];

async function loadData(){
  try{
    const response=await fetch('preguntas.json');
    exam=await response.json();
    showQ();
  }catch(e){
    console.error("Error cargando el JSON",e);
  }
}

function showQ(){
  var q=exam[idx];
  document.getElementById('qNum').textContent=(idx+1);
  document.getElementById('qTotal').textContent=exam.length;
  document.getElementById('pbar').style.width=((idx+1)/exam.length*100)+'%';

  var html='<div class="qtxt">'+q.pregunta+'</div>';
  html+='<div class="opts">';
  
  // AJUSTE 1: Dibujar siempre todas las opciones (las 4)
  q.opciones.forEach(function(opt,i){
    var letter=String.fromCharCode(65+i);
    var cls='opt';
    if(ans[idx]!==undefined){
      cls+=' dis';
      if(opt===q.respuesta) cls+=' ok';
      else if(i===ans[idx]) cls+=' ko';
    }
    html+='<div class="'+cls+'" onclick="check('+i+')"><div class="oltr">'+letter+'</div><div>'+opt+'</div></div>';
  });
  
  html+='</div>';
  document.getElementById('qArea').innerHTML=html;

  // AJUSTE 2: Si ya respondiÃ³, mostramos la motivaciÃ³n
  if(ans[idx]!==undefined){
    var isCorrect = (q.opciones[ans[idx]]===q.respuesta);
    showFeedback(isCorrect);
  }else{
    document.getElementById('fbWrap').innerHTML='';
  }
}

function check(i){
  if(ans[idx]!==undefined)return;
  ans[idx]=i;
  var q=exam[idx];
  var isCorrect=(q.opciones[i]===q.respuesta);
  correct[idx]=isCorrect;
  showQ(); // Refrescamos para mostrar cajones y motivaciÃ³n
}

function showFeedback(isCorrect){
  var q=exam[idx];
  var fb=document.createElement('div');
  fb.className='fb '+(isCorrect?'ok':'ko');
  fb.innerHTML='<div class=\"fb-title\">'+(isCorrect?'âœ“ Â¡Correcto!':'âœ— Incorrecto')+'</div>' +
               '<div class=\"fb-body\"><strong>Respuesta correcta:</strong> '+q.respuesta+'<br><br>'+(q.saber||'')+'</div>';
  document.getElementById('fbWrap').innerHTML='';
  document.getElementById('fbWrap').appendChild(fb);
}

function nextQ(){
  if(idx<exam.length-1){
    idx++;
    showQ();
  }else{
    showResults();
  }
}

function prevQ(){
  if(idx>0){
    idx--;
    showQ();
  }
}

function showResults(){
  var ok=0;
  for(var i=0;i<correct.length;i++){
    if(correct[i])ok++;
  }
  var pct=Math.round(ok/exam.length*100);
  document.getElementById('game').style.display='none';
  document.getElementById('results').style.display='block';
  document.getElementById('rOk').textContent=ok;
  document.getElementById('rKo').textContent=(exam.length-ok);
  document.getElementById('rTot').textContent=exam.length;
  document.getElementById('rPct').textContent=pct+'%';
  var emoji='ðŸ˜';
  if(pct>=90)emoji='ðŸ†';
  else if(pct>=75)emoji='ðŸ˜„';
  else if(pct>=60)emoji='ðŸ™‚';
  else if(pct>=50)emoji='ðŸ˜•';
  else emoji='ðŸ˜ž';
  document.getElementById('rEmoji').textContent=emoji;
}

window.onload=loadData;
</script>

</body>
</html>
